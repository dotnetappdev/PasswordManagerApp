<ContentDialog x:Class="PasswordManager.WinUi.Dialogs.AddPasswordDialog"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               Title="New Item"
               Background="#2D2D2D"
               RequestedTheme="Dark"
               MinWidth="500"
               MaxWidth="600"
               PrimaryButtonClick="ContentDialog_PrimaryButtonClick">

    <ContentDialog.TitleTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Back Button -->
                <Button Grid.Column="0"
                       Background="Transparent"
                       BorderThickness="0"
                       Width="32"
                       Height="32"
                       Margin="0,0,12,0">
                    <FontIcon Glyph="&#xE72B;" FontSize="16" Foreground="White"/>
                </Button>
                
                <!-- Title -->
                <TextBlock Grid.Column="1"
                          Text="New Item"
                          FontSize="20"
                          FontWeight="SemiBold"
                          Foreground="White"
                          VerticalAlignment="Center"/>
                
                <!-- Close Button -->
                <Button Grid.Column="2"
                       Background="Transparent"
                       BorderThickness="0"
                       Width="32"
                       Height="32"
                       Margin="12,0,0,0">
                    <FontIcon Glyph="&#xE8BB;" FontSize="16" Foreground="White"/>
                </Button>
            </Grid>
        </DataTemplate>
    </ContentDialog.TitleTemplate>

    <ScrollViewer MaxHeight="600" 
                  VerticalScrollBarVisibility="Auto"
                  Background="#2D2D2D">
        <StackPanel Spacing="24" Padding="32" Background="#2D2D2D">
            
            <!-- Item Type Selection -->
            <StackPanel Spacing="16">
                <!-- Type Icon and Selector -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Large Type Icon -->
                    <Border Grid.Column="0"
                           Background="#4ECDC4"
                           CornerRadius="12"
                           Width="64"
                           Height="64"
                           Margin="0,0,20,0">
                        <FontIcon Glyph="&#xE192;" 
                                 FontSize="32"
                                 Foreground="White"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center"/>
                        <!-- Dropdown indicator -->
                        <Border Background="#2D2D2D"
                               CornerRadius="6"
                               Width="20"
                               Height="20"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Bottom"
                               Margin="0,0,-4,-4">
                            <FontIcon Glyph="&#xE70D;" FontSize="10" Foreground="White"/>
                        </Border>
                    </Border>
                    
                    <!-- Type Name -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <ComboBox x:Name="TypeComboBox"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 FontSize="24"
                                 FontWeight="Bold"
                                 Foreground="White"
                                 PlaceholderText="Login"
                                 HorizontalAlignment="Left"
                                 SelectionChanged="TypeComboBox_SelectionChanged">
                            <ComboBoxItem Content="Login"/>
                            <ComboBoxItem Content="Credit Card"/>
                            <ComboBoxItem Content="Secure Note"/>
                            <ComboBoxItem Content="Identity"/>
                            <ComboBoxItem Content="WiFi"/>
                            <ComboBoxItem Content="Password"/>
                            <ComboBoxItem Content="Passkey"/>
                        </ComboBox>
                    </StackPanel>
                </Grid>
            </StackPanel>

            <!-- Login Fields (Default Visible) -->
            <StackPanel x:Name="LoginFieldsPanel" 
                       Spacing="20" 
                       Visibility="Visible">
                
                <!-- Username Field -->
                <StackPanel Spacing="8">
                    <TextBlock Text="username" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <TextBox x:Name="UsernameTextBox"
                            Text="username"
                            Background="#404040"
                            BorderThickness="0"
                            CornerRadius="8"
                            Padding="16,12"
                            FontSize="16"
                            Foreground="White"
                            MinHeight="48"/>
                </StackPanel>
                
                <!-- Password Field -->
                <StackPanel Spacing="8">
                    <TextBlock Text="password" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#404040"
                           CornerRadius="8"
                           MinHeight="48">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <PasswordBox x:Name="PasswordTextBox" 
                                        Grid.Column="0"
                                        Password="••••••••••"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Padding="16,12"
                                        FontSize="16"
                                        Foreground="White"/>
                            
                            <TextBox x:Name="PasswordDisplayTextBox"
                                    Grid.Column="0"
                                    Text="••••••••••"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    Visibility="Collapsed"/>
                            
                            <Button x:Name="TogglePasswordVisibilityButton"
                                   Grid.Column="1"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Width="48"
                                   Height="48"
                                   Click="TogglePasswordVisibility_Click">
                                <FontIcon Glyph="&#xE7B3;" FontSize="16" Foreground="#8B8B8B"/>
                            </Button>
                            
                            <Button x:Name="GeneratePasswordButton"
                                   Grid.Column="2"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Width="48"
                                   Height="48"
                                   Click="GeneratePasswordButton_Click"
                                   ToolTipService.ToolTip="Generate Password">
                                <FontIcon Glyph="&#xE777;" FontSize="16" Foreground="#8B8B8B"/>
                            </Button>
                        </Grid>
                    </Border>
                </StackPanel>
                
                <!-- Website Field -->
                <StackPanel Spacing="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0"
                                  Text="website" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        
                        <Button Grid.Column="1"
                               Background="Transparent"
                               BorderThickness="0"
                               Foreground="#4ECDC4"
                               FontSize="14"
                               Margin="0,0,8,0">
                            <FontIcon Glyph="&#xE8F1;" FontSize="12" Margin="0,0,4,0"/>
                        </Button>
                        
                        <Button Grid.Column="2"
                               Background="Transparent"
                               BorderThickness="0"
                               Foreground="#DC2626"
                               FontSize="14">
                            <FontIcon Glyph="&#xE74D;" FontSize="12"/>
                        </Button>
                    </Grid>
                    
                    <TextBox x:Name="UrlTextBox"
                            Text="https://example.com"
                            Background="#404040"
                            BorderThickness="0"
                            CornerRadius="8"
                            Padding="16,12"
                            FontSize="16"
                            Foreground="White"
                            MinHeight="48"/>
                    
                    <!-- Add Another Website -->
                    <Button HorizontalAlignment="Left"
                           Background="Transparent"
                           BorderThickness="0"
                           Foreground="#4ECDC4"
                           FontSize="14"
                           Margin="0,8,0,0">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE109;" FontSize="12"/>
                            <TextBlock Text="add another website"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <!-- Add More Section -->
                <Button HorizontalAlignment="Left"
                       Background="Transparent"
                       BorderThickness="0"
                       Foreground="#4ECDC4"
                       FontSize="14"
                       Margin="0,8,0,0">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE109;" FontSize="12"/>
                        <TextBlock Text="add more"/>
                        <FontIcon Glyph="&#xE70D;" FontSize="12"/>
                    </StackPanel>
                </Button>

                <!-- Notes Section -->
                <StackPanel Spacing="8">
                    <TextBlock Text="notes" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <TextBox Background="#404040"
                            BorderThickness="0"
                            CornerRadius="8"
                            Padding="16,12"
                            FontSize="16"
                            Foreground="White"
                            PlaceholderText="Add any notes about this item here."
                            AcceptsReturn="True"
                            TextWrapping="Wrap"
                            MinHeight="80"
                            MaxHeight="120"/>
                </StackPanel>

                <!-- Location and Tags -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Location -->
                    <StackPanel Grid.Column="0" Margin="0,0,8,0">
                        <Button HorizontalAlignment="Left"
                               Background="Transparent"
                               BorderThickness="0"
                               Foreground="#4ECDC4"
                               FontSize="14">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE109;" FontSize="12"/>
                                <TextBlock Text="add a location"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    
                    <!-- Tags -->
                    <StackPanel Grid.Column="1" Spacing="8" Margin="8,0,0,0">
                        <TextBlock Text="tags" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Button HorizontalAlignment="Left"
                               Background="Transparent"
                               BorderThickness="0"
                               Foreground="#4ECDC4"
                               FontSize="14">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE109;" FontSize="12"/>
                                <TextBlock Text="Add tag"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </StackPanel>
            
            <!-- Organization Section -->
            <StackPanel Spacing="16" Visibility="Collapsed">
                <TextBlock Text="Organization" 
                          FontSize="18" 
                          FontWeight="SemiBold"
                          Foreground="White"/>
                
                <ComboBox x:Name="CategoryComboBox"
                         Header="Category"
                         PlaceholderText="Select category"
                         HorizontalAlignment="Stretch"
                         Background="#404040"
                         Foreground="White"/>
                
                <ComboBox x:Name="CollectionComboBox"
                         Header="Collection"
                         PlaceholderText="Select collection"
                         HorizontalAlignment="Stretch"
                         Background="#404040"
                         Foreground="White"/>
            </StackPanel>
            
            <!-- Other Item Type Fields (Initially Collapsed) -->
            <!-- Credit Card Fields -->
            <StackPanel x:Name="CreditCardFieldsPanel" 
                       Spacing="16" 
                       Visibility="Collapsed">
                <TextBlock Text="Credit Card Details" 
                          FontSize="18" 
                          FontWeight="SemiBold"
                          Foreground="White"/>
                
                <TextBox Header="Cardholder Name" 
                        PlaceholderText="Enter cardholder name"
                        Background="#404040"
                        Foreground="White"/>
                
                <TextBox Header="Card Number" 
                        PlaceholderText="Enter card number"
                        Background="#404040"
                        Foreground="White"/>
            </StackPanel>
            
            <!-- Secure Note Fields -->
            <StackPanel x:Name="SecureNoteFieldsPanel" 
                       Spacing="16" 
                       Visibility="Collapsed">
                <TextBox Header="Note Content"
                        AcceptsReturn="True"
                        TextWrapping="Wrap"
                        MinHeight="120"
                        PlaceholderText="Enter your secure note content"
                        Background="#404040"
                        Foreground="White"/>
            </StackPanel>
            
            <!-- Basic Information (Bottom Section) -->
            <StackPanel Spacing="16" Visibility="Collapsed">
                <TextBox x:Name="TitleTextBox"
                        Header="Title"
                        PlaceholderText="Enter title"
                        Background="#404040"
                        Foreground="White"/>
                
                <TextBox x:Name="DescriptionTextBox"
                        Header="Description"
                        PlaceholderText="Optional description"
                        AcceptsReturn="True"
                        MaxHeight="80"
                        Background="#404040"
                        Foreground="White"/>
                
                <CheckBox x:Name="IsFavoriteCheckBox"
                         Content="⭐ Mark as favorite"
                         Foreground="White"/>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</ContentDialog>