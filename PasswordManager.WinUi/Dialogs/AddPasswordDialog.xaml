<ContentDialog x:Class="PasswordManager.WinUi.Dialogs.AddPasswordDialog"
                           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                           PrimaryButtonClick="ContentDialog_PrimaryButtonClick"
                           Background="{StaticResource ModernSurfaceBrush}"
                           Foreground="{StaticResource ModernTextPrimaryBrush}"
                           BorderBrush="{StaticResource ModernBorderBrush}"
                           BorderThickness="1"
                           CornerRadius="12"
                           PrimaryButtonStyle="{StaticResource ContentDialogButtonStyle}"
                           SecondaryButtonStyle="{StaticResource ContentDialogButtonStyle}">

        <!-- ContentDialog supports a single content element. Wrap everything in a Grid/ScrollViewer once. -->
        <Grid>
                <ScrollViewer MaxHeight="600" MaxWidth="500">
                        <StackPanel Spacing="16" Padding="16">
            
            <!-- Basic Information -->
            <TextBlock Text="Select Category First" 
                      FontSize="18" 
                      FontWeight="SemiBold"/>
                      
            <ComboBox x:Name="CategoryComboBox"
                     Header="Category *"
                     PlaceholderText="Select category first"
                     HorizontalAlignment="Stretch"
                     Margin="0,0,0,16"/>
            
            <TextBlock Text="Basic Information" 
                      FontSize="18" 
                      FontWeight="SemiBold"/>
            
            <TextBox x:Name="TitleTextBox"
                    Header="Title *"
                    PlaceholderText="Enter title"/>
            
            <TextBox x:Name="DescriptionTextBox"
                    Header="Description"
                    PlaceholderText="Optional description"
                    AcceptsReturn="True"
                    MaxHeight="80"/>
            
            <ComboBox x:Name="TypeComboBox"
                     Header="Type *"
                     PlaceholderText="Select type"
                     HorizontalAlignment="Stretch"
                     SelectionChanged="TypeComboBox_SelectionChanged">
                <ComboBoxItem Content="🔐 Login"/>
                <ComboBoxItem Content="💳 Credit Card"/>
                <ComboBoxItem Content="📝 Secure Note"/>
                <ComboBoxItem Content="📶 WiFi"/>
                <ComboBoxItem Content="🔐 Password"/>
                <ComboBoxItem Content="🔑 Passkey"/>
            </ComboBox>
            
            <CheckBox x:Name="IsFavoriteCheckBox"
                     Content="⭐ Mark as favorite"/>
            
            <!-- Organization -->
            <TextBlock Text="Organization" 
                      FontSize="18" 
                      FontWeight="SemiBold"
                      Margin="0,20,0,0"/>
            
            <ComboBox x:Name="CollectionComboBox"
                     Header="Collection"
                     PlaceholderText="Select collection"
                     HorizontalAlignment="Stretch"/>
            
            <!-- Login Fields -->
            <StackPanel x:Name="LoginFieldsPanel" 
                       Spacing="12" 
                       Visibility="Collapsed"
                       Margin="0,20,0,0">
                <TextBlock Text="Login Details" 
                          FontSize="18" 
                          FontWeight="SemiBold"/>
                
                <TextBox x:Name="UsernameTextBox"
                        Header="Username / Email"
                        PlaceholderText="Enter username or email"/>
                
                <StackPanel Spacing="8">
                    <TextBlock Text="Password" Style="{StaticResource CaptionTextBlockStyle}"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <PasswordBox x:Name="PasswordTextBox" 
                                    Grid.Column="0"
                                    PlaceholderText="Enter password"
                                    RightTapped="PasswordTextBox_RightTapped"/>
                        
                        <TextBox x:Name="PasswordDisplayTextBox"
                                Grid.Column="0"
                                Visibility="Collapsed"/>
                        
                           <Button x:Name="TogglePasswordVisibilityButton"
                                   Grid.Column="1"
                                   Content="👁️"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Click="TogglePasswordVisibility_Click"
                                   Margin="4,0"
                                   ToolTipService.ToolTip="Show/Hide"/>
                        
                           <Button x:Name="GeneratePasswordButton"
                                   Grid.Column="2"
                                   Content="🎲"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Click="GeneratePasswordButton_Click"
                                   ToolTipService.ToolTip="Generate Password"
                                   Margin="4,0"/>
                    </Grid>
                </StackPanel>
                
                <TextBox x:Name="UrlTextBox"
                        Header="Website URL"
                        PlaceholderText="https://example.com"/>
            </StackPanel>
            
            <!-- Credit Card Fields -->
            <StackPanel x:Name="CreditCardFieldsPanel" 
                       Spacing="12" 
                       Visibility="Collapsed"
                       Margin="0,20,0,0">
                <TextBlock Text="Credit Card Details" 
                          FontSize="18" 
                          FontWeight="SemiBold"/>
                
                <TextBox Header="Cardholder Name" 
                        PlaceholderText="Enter cardholder name"/>
                
                <TextBox Header="Card Number" 
                        PlaceholderText="Enter card number"/>
                
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBox Grid.Column="0"
                            Header="Expiry Date" 
                            PlaceholderText="MM/YY"
                            Margin="0,0,8,0"/>
                    
                    <PasswordBox Grid.Column="1"
                                Header="CVV" 
                                PlaceholderText="CVV"
                                Margin="8,0,0,0"/>
                </Grid>
            </StackPanel>
            
            <!-- Secure Note Fields -->
            <StackPanel x:Name="SecureNoteFieldsPanel" 
                       Spacing="12" 
                       Visibility="Collapsed"
                       Margin="0,20,0,0">
                <TextBlock Text="Note Content" 
                          FontSize="18" 
                          FontWeight="SemiBold"/>
                
                <TextBox Header="Note Content"
                        AcceptsReturn="True"
                        TextWrapping="Wrap"
                        MinHeight="120"
                        PlaceholderText="Enter your secure note content"/>
            </StackPanel>
            
            <!-- WiFi Fields -->
            <StackPanel x:Name="WiFiFieldsPanel" 
                       Spacing="12" 
                       Visibility="Collapsed"
                       Margin="0,20,0,0">
                <TextBlock Text="WiFi Details" 
                          FontSize="18" 
                          FontWeight="SemiBold"/>
                
                <TextBox Header="Network Name (SSID)" 
                        PlaceholderText="Enter network name"/>
                
                <PasswordBox Header="Password" 
                            PlaceholderText="Enter WiFi password"/>
                
                <ComboBox Header="Security Type"
                         PlaceholderText="Select security type"
                         HorizontalAlignment="Stretch">
                    <ComboBoxItem Content="WPA2"/>
                    <ComboBoxItem Content="WPA3"/>
                    <ComboBoxItem Content="WEP"/>
                    <ComboBoxItem Content="Open"/>
                </ComboBox>
            </StackPanel>
            
            <!-- Passkey Fields -->
            <StackPanel x:Name="PasskeyFieldsPanel" 
                       Spacing="12" 
                       Visibility="Collapsed"
                       Margin="0,20,0,0">
                <TextBlock Text="Passkey Details" 
                          FontSize="18" 
                          FontWeight="SemiBold"/>
                
                <TextBox x:Name="PasskeyWebsiteTextBox"
                        Header="Website"
                        PlaceholderText="Enter website name"/>
                
                <TextBox x:Name="PasskeyUrlTextBox"
                        Header="Website URL"
                        PlaceholderText="https://example.com"/>
                
                <TextBox x:Name="PasskeyUsernameTextBox"
                        Header="Username / Email"
                        PlaceholderText="Enter username or email"/>
                
                <TextBox x:Name="PasskeyDisplayNameTextBox"
                        Header="Display Name"
                        PlaceholderText="Enter display name for this passkey"/>
                
                <TextBox x:Name="PasskeyDeviceTypeTextBox"
                        Header="Device Type"
                        PlaceholderText="e.g., iPhone, Windows PC, etc."
                        IsReadOnly="True"/>
                
                <CheckBox x:Name="PasskeyRequiresVerificationCheckBox"
                         Content="Requires user verification (PIN/biometric)"
                         IsChecked="True"/>
                
                <CheckBox x:Name="PasskeyIsBackedUpCheckBox"
                         Content="Passkey is synced/backed up across devices"/>
                
                <TextBox x:Name="PasskeyNotesTextBox"
                        Header="Notes"
                        PlaceholderText="Additional notes about this passkey"
                        AcceptsReturn="True"
                        MaxHeight="80"/>
                
                <Button x:Name="RegisterPasskeyButton"
                       Content="🔑 Register New Passkey"
                       HorizontalAlignment="Left"
                       Click="RegisterPasskeyButton_Click"
                       Background="{ThemeResource AccentButtonBackground}"
                       Foreground="{ThemeResource AccentButtonForeground}"/>
            </StackPanel>
            
                        </StackPanel>
                </ScrollViewer>
                
                <!-- Password Generator Popup -->
                <Popup x:Name="PasswordGeneratorPopup" 
                       IsLightDismissEnabled="True"
                       Visibility="Collapsed"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                    <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}"
                            BorderBrush="{ThemeResource SystemControlForegroundBaseMediumLowBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="20">
                        <StackPanel Spacing="12" MinWidth="300">
                            <TextBlock Text="Password Generator" 
                                      FontSize="18" 
                                      FontWeight="SemiBold"
                                      HorizontalAlignment="Center"/>
                            
                            <!-- Generated Password Display -->
                            <Border Background="{ThemeResource SystemControlBackgroundBaseLowBrush}"
                                    BorderBrush="{ThemeResource SystemControlForegroundBaseMediumLowBrush}"
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    Padding="12">
                                <TextBlock x:Name="GeneratedPasswordText"
                                          Text="Click generate to create password"
                                          FontFamily="Consolas"
                                          TextWrapping="Wrap"
                                          HorizontalAlignment="Center"/>
                            </Border>
                            
                            <!-- Password Length Control -->
                            <StackPanel Spacing="8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Password Length" VerticalAlignment="Center"/>
                                    <TextBlock x:Name="PasswordLengthText" 
                                              Grid.Column="1" 
                                              Text="13" 
                                              FontWeight="SemiBold"
                                              VerticalAlignment="Center"/>
                                </Grid>
                                <Slider x:Name="PasswordLengthSlider"
                                       Minimum="4"
                                       Maximum="64"
                                       Value="13"
                                       StepFrequency="1"
                                       ValueChanged="PasswordLengthSlider_ValueChanged"/>
                            </StackPanel>
                            
                            <!-- Character Options -->
                            <StackPanel Spacing="8">
                                <TextBlock Text="Character Options" FontWeight="SemiBold"/>
                                <ToggleSwitch x:Name="NumbersToggle"
                                             Header="Include Numbers (0-9)"
                                             IsOn="True"/>
                                <ToggleSwitch x:Name="SymbolsToggle"
                                             Header="Include Symbols (!@#$...)"/>
                            </StackPanel>
                            
                            <!-- Action Buttons -->
                            <Grid Margin="0,12,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Button Grid.Column="0"
                                        Content="🎲 Generate"
                                        Click="RefreshPassword_Click"
                                        HorizontalAlignment="Stretch"
                                        Margin="0,0,4,0"/>
                                
                                <Button Grid.Column="1"
                                        Content="✓ Use"
                                        Click="UseGeneratedPassword_Click"
                                        Style="{StaticResource AccentButtonStyle}"
                                        HorizontalAlignment="Stretch"
                                        Margin="2,0"/>
                                
                                <Button Grid.Column="2"
                                        Content="✕ Cancel"
                                        Click="CancelPasswordGenerator_Click"
                                        HorizontalAlignment="Stretch"
                                        Margin="4,0,0,0"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Popup>
                
                <!-- Item Selection Panel (initially visible) -->
                <StackPanel x:Name="ItemSelectionPanel" 
                           Visibility="Collapsed"
                           Spacing="16" 
                           Padding="16">
                    <TextBlock Text="Select Item Type" 
                              FontSize="18" 
                              FontWeight="SemiBold"
                              HorizontalAlignment="Center"/>
                    <!-- Additional item type buttons would go here -->
                </StackPanel>
                
                <!-- Login Detail Panel (initially hidden) -->
                <StackPanel x:Name="LoginDetailPanel" 
                           Visibility="Collapsed"
                           Spacing="16" 
                           Padding="16">
                    <TextBlock Text="Login Details" 
                              FontSize="18" 
                              FontWeight="SemiBold"/>
                    <!-- Additional login detail controls would go here -->
                </StackPanel>
        </Grid>
</ContentDialog>