<ContentDialog x:Class="PasswordManager.WinUi.Dialogs.AddPasswordDialog"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               Background="#2D2D2D"
               RequestedTheme="Dark"
               MinWidth="700"
               MaxWidth="800"
               MinHeight="600"
               MaxHeight="800"
               PrimaryButtonClick="ContentDialog_PrimaryButtonClick">

    <ContentDialog.TitleTemplate>
        <DataTemplate>
            <Grid Height="60" Margin="0,-20,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Back Button -->
                <Button Grid.Column="0"
                       x:Name="BackButton"
                       Background="Transparent"
                       BorderThickness="0"
                       Width="40"
                       Height="40"
                       Margin="0,0,12,0"
                       VerticalAlignment="Center"
                       Visibility="Collapsed"
                       Click="BackButton_Click">
                    <FontIcon Glyph="&#xE72B;" FontSize="16" Foreground="#FFFFFF"/>
                </Button>
                
                <!-- Title -->
                <TextBlock Grid.Column="1"
                          x:Name="DialogTitle"
                          Text="What would you like to add?"
                          FontSize="24"
                          FontWeight="SemiBold"
                          Foreground="#FFFFFF"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"/>
                
                <!-- Close Button -->
                <Button Grid.Column="2"
                       x:Name="CloseButton"
                       Background="Transparent"
                       BorderThickness="0"
                       Width="40"
                       Height="40"
                       Margin="12,0,0,0"
                       VerticalAlignment="Center">
                    <FontIcon Glyph="&#xE8BB;" FontSize="16" Foreground="#FFFFFF"/>
                </Button>
            </Grid>
        </DataTemplate>
    </ContentDialog.TitleTemplate>

    <ScrollViewer MaxHeight="700" 
                  VerticalScrollBarVisibility="Auto"
                  Background="#2D2D2D">
        
        <!-- Main Content Grid -->
        <Grid Background="#2D2D2D">
            
            <!-- Initial Selection Screen -->
            <StackPanel x:Name="ItemSelectionPanel" Spacing="24" Padding="32" Visibility="Visible">
                
                <!-- Search Box -->
                <TextBox x:Name="SearchBox"
                        PlaceholderText="🔍 Try searching anything"
                        Background="#404040"
                        BorderThickness="0"
                        CornerRadius="12"
                        Padding="16,14"
                        FontSize="16"
                        Foreground="#FFFFFF"
                        MinHeight="52"
                        BorderBrush="#7C3AED"/>
                
                <!-- Item Type Grid -->
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Login -->
                    <Border Grid.Row="0" Grid.Column="0" 
                           Background="#404040"
                           CornerRadius="12"
                           Padding="20"
                           Margin="0,0,8,8"
                           MinHeight="120"
                           BorderBrush="#555555"
                           BorderThickness="1">
                        <Button x:Name="LoginTypeButton"
                               Background="Transparent"
                               BorderThickness="0"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               Click="ItemTypeButton_Click"
                               Tag="Login">
                            <StackPanel Spacing="12" HorizontalAlignment="Center">
                                <Border Background="#4ECDC4"
                                       CornerRadius="8"
                                       Width="40"
                                       Height="40">
                                    <FontIcon Glyph="&#xE192;" FontSize="20" Foreground="White"/>
                                </Border>
                                <TextBlock Text="Login" 
                                          FontSize="16" 
                                          FontWeight="SemiBold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Border>
                    
                    <!-- Secure Note -->
                    <Border Grid.Row="0" Grid.Column="1" 
                           Background="#404040"
                           CornerRadius="12"
                           Padding="20"
                           Margin="4,0,4,8"
                           MinHeight="120"
                           BorderBrush="#555555"
                           BorderThickness="1">
                        <Button x:Name="SecureNoteTypeButton"
                               Background="Transparent"
                               BorderThickness="0"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               Click="ItemTypeButton_Click"
                               Tag="SecureNote">
                            <StackPanel Spacing="12" HorizontalAlignment="Center">
                                <Border Background="#F39C12"
                                       CornerRadius="8"
                                       Width="40"
                                       Height="40">
                                    <FontIcon Glyph="&#xE8A5;" FontSize="20" Foreground="White"/>
                                </Border>
                                <TextBlock Text="Secure Note" 
                                          FontSize="16" 
                                          FontWeight="SemiBold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Border>
                    
                    <!-- Credit Card -->
                    <Border Grid.Row="0" Grid.Column="2" 
                           Background="#404040"
                           CornerRadius="12"
                           Padding="20"
                           Margin="8,0,0,8"
                           MinHeight="120"
                           BorderBrush="#555555"
                           BorderThickness="1">
                        <Button x:Name="CreditCardTypeButton"
                               Background="Transparent"
                               BorderThickness="0"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               Click="ItemTypeButton_Click"
                               Tag="CreditCard">
                            <StackPanel Spacing="12" HorizontalAlignment="Center">
                                <Border Background="#3498DB"
                                       CornerRadius="8"
                                       Width="40"
                                       Height="40">
                                    <FontIcon Glyph="&#xE8C7;" FontSize="20" Foreground="White"/>
                                </Border>
                                <TextBlock Text="Credit Card" 
                                          FontSize="16" 
                                          FontWeight="SemiBold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Border>
                    
                    <!-- Identity -->
                    <Border Grid.Row="1" Grid.Column="0" 
                           Background="#404040"
                           CornerRadius="12"
                           Padding="20"
                           Margin="0,4,8,0"
                           MinHeight="120"
                           BorderBrush="#555555"
                           BorderThickness="1">
                        <Button x:Name="IdentityTypeButton"
                               Background="Transparent"
                               BorderThickness="0"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               Click="ItemTypeButton_Click"
                               Tag="Identity">
                            <StackPanel Spacing="12" HorizontalAlignment="Center">
                                <Border Background="#27AE60"
                                       CornerRadius="8"
                                       Width="40"
                                       Height="40">
                                    <FontIcon Glyph="&#xE77B;" FontSize="20" Foreground="White"/>
                                </Border>
                                <TextBlock Text="Identity" 
                                          FontSize="16" 
                                          FontWeight="SemiBold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Border>
                    
                    <!-- Password -->
                    <Border Grid.Row="1" Grid.Column="1" 
                           Background="#404040"
                           CornerRadius="12"
                           Padding="20"
                           Margin="4,4,4,0"
                           MinHeight="120"
                           BorderBrush="#555555"
                           BorderThickness="1">
                        <Button x:Name="PasswordTypeButton"
                               Background="Transparent"
                               BorderThickness="0"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               Click="ItemTypeButton_Click"
                               Tag="Password">
                            <StackPanel Spacing="12" HorizontalAlignment="Center">
                                <Border Background="#8E44AD"
                                       CornerRadius="8"
                                       Width="40"
                                       Height="40">
                                    <FontIcon Glyph="&#xE1A2;" FontSize="20" Foreground="White"/>
                                </Border>
                                <TextBlock Text="Password" 
                                          FontSize="16" 
                                          FontWeight="SemiBold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Border>
                    
                    <!-- Document -->
                    <Border Grid.Row="1" Grid.Column="2" 
                           Background="#404040"
                           CornerRadius="12"
                           Padding="20"
                           Margin="8,4,0,0"
                           MinHeight="120"
                           BorderBrush="#555555"
                           BorderThickness="1">
                        <Button x:Name="DocumentTypeButton"
                               Background="Transparent"
                               BorderThickness="0"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               Click="ItemTypeButton_Click"
                               Tag="Document">
                            <StackPanel Spacing="12" HorizontalAlignment="Center">
                                <Border Background="#E74C3C"
                                       CornerRadius="8"
                                       Width="40"
                                       Height="40">
                                    <FontIcon Glyph="&#xE8A5;" FontSize="20" Foreground="White"/>
                                </Border>
                                <TextBlock Text="Document" 
                                          FontSize="16" 
                                          FontWeight="SemiBold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Border>
                </Grid>
                
                <!-- Show More Button -->
                <Button x:Name="ShowMoreButton"
                       Background="Transparent"
                       BorderThickness="0"
                       HorizontalAlignment="Center"
                       Margin="0,16,0,0"
                       Click="ShowMoreButton_Click">
                    <TextBlock Text="Show more" 
                              FontSize="16"
                              Foreground="#7C3AED"
                              TextDecorations="Underline"/>
                </Button>
                
                <!-- Import Section -->
                <Border Background="#404040"
                       CornerRadius="12"
                       Padding="20"
                       Margin="0,24,0,0"
                       BorderBrush="#555555"
                       BorderThickness="1">
                    <Button x:Name="ImportDataButton"
                           Background="Transparent"
                           BorderThickness="0"
                           HorizontalAlignment="Stretch"
                           Click="ImportDataButton_Click">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0"
                                      Text="Migrate data into 1Password"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Foreground="White"
                                      VerticalAlignment="Center"
                                      HorizontalAlignment="Left"/>
                            
                            <FontIcon Grid.Column="1"
                                     Glyph="&#xE76C;"
                                     FontSize="16"
                                     Foreground="#7C3AED"/>
                        </Grid>
                    </Button>
                </Border>
                
            </StackPanel>
            
            <!-- Login Detail Form Panel -->
            <StackPanel x:Name="LoginDetailPanel" Spacing="20" Padding="32" Visibility="Collapsed">
                
                <!-- Item Type Header -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Large Type Icon -->
                    <Border Grid.Column="0"
                           Background="#4ECDC4"
                           CornerRadius="12"
                           Width="64"
                           Height="64"
                           Margin="0,0,20,0">
                        <FontIcon Glyph="&#xE192;" 
                                 FontSize="32"
                                 Foreground="White"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center"/>
                        <!-- Dropdown indicator -->
                        <Border Background="#2D2D2D"
                               CornerRadius="6"
                               Width="20"
                               Height="20"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Bottom"
                               Margin="0,0,-4,-4">
                            <FontIcon Glyph="&#xE70D;" FontSize="10" Foreground="White"/>
                        </Border>
                    </Border>
                    
                    <!-- Type Name and Type Selector -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Spacing="8">
                        <TextBlock Text="Login"
                                  FontSize="24"
                                  FontWeight="Bold"
                                  Foreground="White"/>
                        <ComboBox x:Name="TypeComboBox"
                                 MinWidth="200"
                                 SelectionChanged="TypeComboBox_SelectionChanged"
                                 Background="#404040"
                                 BorderThickness="0"
                                 Foreground="White">
                            <ComboBoxItem Content="Login" Tag="1"/>
                            <ComboBoxItem Content="Secure Note" Tag="2"/>
                            <ComboBoxItem Content="Credit Card" Tag="3"/>
                            <ComboBoxItem Content="Identity" Tag="4"/>
                            <ComboBoxItem Content="Password" Tag="5"/>
                            <ComboBoxItem Content="WiFi" Tag="6"/>
                            <ComboBoxItem Content="Passkey" Tag="7"/>
                        </ComboBox>
                    </StackPanel>
                </Grid>
                
                <!-- Title Field -->
                <StackPanel Spacing="8">
                    <TextBlock Text="title" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#404040"
                           CornerRadius="8"
                           MinHeight="48">
                        <TextBox x:Name="TitleTextBox"
                                Text=""
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="16,12"
                                FontSize="16"
                                Foreground="White"
                                PlaceholderText="Enter title..."/>
                    </Border>
                </StackPanel>
                
                <!-- Description Field -->
                <StackPanel Spacing="8">
                    <TextBlock Text="description" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#404040"
                           CornerRadius="8"
                           MinHeight="48">
                        <TextBox x:Name="DescriptionTextBox"
                                Text=""
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="16,12"
                                FontSize="16"
                                Foreground="White"
                                PlaceholderText="Enter description..."/>
                    </Border>
                </StackPanel>
                
                <!-- Favorite Checkbox -->
                <CheckBox x:Name="IsFavoriteCheckBox" 
                         Content="Mark as favorite"
                         Foreground="White"
                         Margin="0,8,0,0"/>
                
                <!-- Login Fields Panel -->
                <StackPanel x:Name="LoginFieldsPanel" Spacing="20" Visibility="Visible">
                
                    <!-- Username Field -->
                    <StackPanel Spacing="8">
                    <TextBlock Text="username" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#404040"
                           CornerRadius="8"
                           MinHeight="48">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="UsernameTextBox"
                                    Grid.Column="0"
                                    Text="username"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"/>
                            
                            <Button Grid.Column="1"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Width="48"
                                   Height="48"
                                   Click="ShowUsernameHistory_Click"
                                   ToolTipService.ToolTip="Previous usernames">
                                <FontIcon Glyph="&#xE81C;" FontSize="16" Foreground="#8B8B8B"/>
                            </Button>
                        </Grid>
                    </Border>
                </StackPanel>
                
                <!-- Password Field with Generator -->
                <StackPanel Spacing="8">
                    <TextBlock Text="password" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#404040"
                           CornerRadius="8"
                           MinHeight="48">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <PasswordBox x:Name="PasswordTextBox" 
                                        Grid.Column="0"
                                        Password="••••••••••"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Padding="16,12"
                                        FontSize="16"
                                        Foreground="White"
                                        RightTapped="PasswordTextBox_RightTapped"/>
                            
                            <TextBox x:Name="PasswordDisplayTextBox"
                                    Grid.Column="0"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    Visibility="Collapsed"
                                    IsReadOnly="True"/>
                            
                            <Button x:Name="TogglePasswordVisibilityButton"
                                   Grid.Column="1"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Width="48"
                                   Height="48"
                                   Click="TogglePasswordVisibility_Click">
                                <FontIcon Glyph="&#xE7B3;" FontSize="16" Foreground="#8B8B8B"/>
                            </Button>
                            
                            <Button x:Name="GeneratePasswordButton"
                                   Grid.Column="2"
                                   Background="Transparent"
                                   BorderThickness="0"
                                   Width="48"
                                   Height="48"
                                   Click="GeneratePasswordButton_Click"
                                   ToolTipService.ToolTip="Generate Password">
                                <FontIcon Glyph="&#xE777;" FontSize="16" Foreground="#8B8B8B"/>
                            </Button>
                        </Grid>
                    </Border>
                    
                    <!-- Password Generator Popup -->
                    <Border x:Name="PasswordGeneratorPopup"
                           Background="#404040"
                           CornerRadius="8"
                           Padding="16"
                           Margin="0,8,0,0"
                           BorderBrush="#7C3AED"
                           BorderThickness="2"
                           Visibility="Collapsed">
                        <StackPanel Spacing="12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0"
                                          Text="🔑 Create a New Password"
                                          FontSize="16"
                                          FontWeight="SemiBold"
                                          Foreground="White"
                                          VerticalAlignment="Center"/>
                                
                                <Button Grid.Column="1"
                                       Background="Transparent"
                                       BorderThickness="0"
                                       Padding="8"
                                       Margin="0,0,8,0"
                                       Click="RefreshPassword_Click">
                                    <FontIcon Glyph="&#xE777;" FontSize="14" Foreground="#7C3AED"/>
                                </Button>
                                
                                <Button Grid.Column="2"
                                       Background="Transparent"
                                       BorderThickness="0"
                                       Padding="8"
                                       Click="ClosePasswordGenerator_Click">
                                    <FontIcon Glyph="&#xE8BB;" FontSize="14" Foreground="#8B8B8B"/>
                                </Button>
                            </Grid>
                            
                            <!-- Generated Password -->
                            <Border Background="#2D2D2D"
                                   CornerRadius="6"
                                   Padding="12">
                                <TextBlock x:Name="GeneratedPasswordText"
                                          Text="ebBPDuw4yD%X4"
                                          FontSize="16"
                                          FontWeight="SemiBold"
                                          Foreground="#4ECDC4"
                                          HorizontalAlignment="Center"/>
                            </Border>
                            
                            <!-- Generator Options -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0"
                                          Text="Type"
                                          FontSize="14"
                                          Foreground="#8B8B8B"
                                          VerticalAlignment="Center"
                                          Margin="0,0,12,0"/>
                                
                                <ComboBox Grid.Column="1"
                                         x:Name="PasswordTypeComboBox"
                                         Background="#2D2D2D"
                                         Foreground="White"
                                         SelectedIndex="0">
                                    <ComboBoxItem Content="Random Password"/>
                                    <ComboBoxItem Content="Memorable Password"/>
                                    <ComboBoxItem Content="PIN"/>
                                </ComboBox>
                            </Grid>
                            
                            <!-- Character Length -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0"
                                          Text="Characters"
                                          FontSize="14"
                                          Foreground="#8B8B8B"
                                          VerticalAlignment="Center"
                                          Margin="0,0,12,0"/>
                                
                                <Slider Grid.Column="1"
                                       x:Name="PasswordLengthSlider"
                                       Minimum="8"
                                       Maximum="32"
                                       Value="13"
                                       VerticalAlignment="Center"/>
                                
                                <TextBlock Grid.Column="2"
                                          x:Name="PasswordLengthText"
                                          Text="13"
                                          FontSize="14"
                                          Foreground="White"
                                          VerticalAlignment="Center"
                                          Margin="8,0,0,0"/>
                            </Grid>
                            
                            <!-- Toggle Options -->
                            <StackPanel Spacing="8">
                                <ToggleSwitch x:Name="NumbersToggle"
                                             Header="Numbers"
                                             IsOn="True"
                                             Foreground="White"/>
                                <ToggleSwitch x:Name="SymbolsToggle"
                                             Header="Symbols"
                                             IsOn="False"
                                             Foreground="White"/>
                            </StackPanel>
                            
                            <!-- Action Buttons -->
                            <Grid Margin="0,8,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <Button Grid.Column="0"
                                       Background="Transparent"
                                       BorderThickness="0"
                                       Foreground="#8B8B8B"
                                       Click="CancelPasswordGenerator_Click">
                                    <TextBlock Text="Cancel" FontSize="14"/>
                                </Button>
                                
                                <Button Grid.Column="2"
                                       Background="#7C3AED"
                                       Foreground="White"
                                       BorderThickness="0"
                                       CornerRadius="6"
                                       Padding="16,8"
                                       Click="UseGeneratedPassword_Click">
                                    <TextBlock Text="Use" FontSize="14" FontWeight="SemiBold"/>
                                </Button>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- Website Field -->
                <StackPanel Spacing="8">
                    <TextBlock Text="website" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <TextBox x:Name="UrlTextBox"
                            Text="https://example.com"
                            Background="#404040"
                            BorderThickness="0"
                            CornerRadius="8"
                            Padding="16,12"
                            FontSize="16"
                            Foreground="White"
                            MinHeight="48"/>
                    
                    <!-- Add Another Website -->
                    <Button HorizontalAlignment="Left"
                           Background="Transparent"
                           BorderThickness="0"
                           Foreground="#4ECDC4"
                           FontSize="14"
                           Margin="0,8,0,0">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE109;" FontSize="12"/>
                            <TextBlock Text="add another website"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
                
                <!-- Category Field -->
                <StackPanel Spacing="8">
                    <TextBlock Text="category" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#404040"
                           CornerRadius="8"
                           MinHeight="48">
                        <ComboBox x:Name="CategoryComboBox"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 Padding="16,12"
                                 FontSize="16"
                                 Foreground="White"
                                 HorizontalAlignment="Stretch"
                                 PlaceholderText="Select category..."/>
                    </Border>
                </StackPanel>
                
                <!-- Collection Field -->
                <StackPanel Spacing="8">
                    <TextBlock Text="collection" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#404040"
                           CornerRadius="8"
                           MinHeight="48">
                        <ComboBox x:Name="CollectionComboBox"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 Padding="16,12"
                                 FontSize="16"
                                 Foreground="White"
                                 HorizontalAlignment="Stretch"
                                 PlaceholderText="Select collection..."/>
                    </Border>
                </StackPanel>
                
                </StackPanel>
                
                <!-- Credit Card Fields Panel -->
                <StackPanel x:Name="CreditCardFieldsPanel" Spacing="20" Visibility="Collapsed">
                    <TextBlock Text="Credit card fields would go here" 
                              FontSize="16" 
                              Foreground="#8B8B8B"/>
                </StackPanel>
                
                <!-- Secure Note Fields Panel -->
                <StackPanel x:Name="SecureNoteFieldsPanel" Spacing="20" Visibility="Collapsed">
                    <TextBlock Text="Secure note fields would go here" 
                              FontSize="16" 
                              Foreground="#8B8B8B"/>
                </StackPanel>
                
                <!-- WiFi Fields Panel -->
                <StackPanel x:Name="WiFiFieldsPanel" Spacing="20" Visibility="Collapsed">
                    <TextBlock Text="WiFi fields would go here" 
                              FontSize="16" 
                              Foreground="#8B8B8B"/>
                </StackPanel>
                
                <!-- Passkey Fields Panel -->
                <StackPanel x:Name="PasskeyFieldsPanel" Spacing="20" Visibility="Collapsed">
                    
                    <!-- Passkey Website -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="website" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Border Background="#404040"
                               CornerRadius="8"
                               MinHeight="48">
                            <TextBox x:Name="PasskeyWebsiteTextBox"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    PlaceholderText="Enter website..."/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Passkey URL -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="url" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Border Background="#404040"
                               CornerRadius="8"
                               MinHeight="48">
                            <TextBox x:Name="PasskeyUrlTextBox"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    PlaceholderText="Enter URL..."/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Passkey Username -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="username" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Border Background="#404040"
                               CornerRadius="8"
                               MinHeight="48">
                            <TextBox x:Name="PasskeyUsernameTextBox"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    PlaceholderText="Enter username..."/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Passkey Display Name -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="display name" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Border Background="#404040"
                               CornerRadius="8"
                               MinHeight="48">
                            <TextBox x:Name="PasskeyDisplayNameTextBox"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    PlaceholderText="Enter display name..."/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Passkey Device Type -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="device type" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Border Background="#404040"
                               CornerRadius="8"
                               MinHeight="48">
                            <TextBox x:Name="PasskeyDeviceTypeTextBox"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    PlaceholderText="Enter device type..."/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Passkey Checkboxes -->
                    <StackPanel Spacing="12">
                        <CheckBox x:Name="PasskeyRequiresVerificationCheckBox" 
                                 Content="Requires user verification"
                                 Foreground="White"/>
                        <CheckBox x:Name="PasskeyIsBackedUpCheckBox" 
                                 Content="Is backed up"
                                 Foreground="White"/>
                    </StackPanel>
                    
                    <!-- Passkey Notes -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="notes" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Border Background="#404040"
                               CornerRadius="8"
                               MinHeight="80">
                            <TextBox x:Name="PasskeyNotesTextBox"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="16,12"
                                    FontSize="16"
                                    Foreground="White"
                                    PlaceholderText="Enter notes..."
                                    AcceptsReturn="True"
                                    TextWrapping="Wrap"/>
                        </Border>
                    </StackPanel>
                    
                </StackPanel>
                
                <!-- Add More Section -->
                <Button HorizontalAlignment="Left"
                       Background="Transparent"
                       BorderThickness="0"
                       Foreground="#4ECDC4"
                       FontSize="14"
                       Margin="0,8,0,0">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE109;" FontSize="12"/>
                        <TextBlock Text="add more"/>
                        <FontIcon Glyph="&#xE70D;" FontSize="12"/>
                    </StackPanel>
                </Button>
                
                <!-- Notes Section -->
                <StackPanel Spacing="8">
                    <TextBlock Text="notes" 
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#8B8B8B"/>
                    <Border Background="#7C3AED"
                           CornerRadius="8"
                           Padding="2"
                           BorderThickness="1">
                        <TextBox Background="#404040"
                                BorderThickness="0"
                                CornerRadius="6"
                                Padding="16,12"
                                FontSize="16"
                                Foreground="White"
                                PlaceholderText="Add any notes about this item here."
                                AcceptsReturn="True"
                                TextWrapping="Wrap"
                                MinHeight="80"
                                MaxHeight="120"/>
                    </Border>
                </StackPanel>
                
                <!-- Location and Tags -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Location -->
                    <StackPanel Grid.Column="0" Margin="0,0,8,0">
                        <Button HorizontalAlignment="Left"
                               Background="Transparent"
                               BorderThickness="0"
                               Foreground="#4ECDC4"
                               FontSize="14">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE109;" FontSize="12"/>
                                <TextBlock Text="add a location"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    
                    <!-- Tags -->
                    <StackPanel Grid.Column="1" Spacing="8" Margin="8,0,0,0">
                        <TextBlock Text="tags" 
                                  FontWeight="SemiBold"
                                  FontSize="14"
                                  Foreground="#8B8B8B"/>
                        <Button HorizontalAlignment="Left"
                               Background="Transparent"
                               BorderThickness="0"
                               Foreground="#4ECDC4"
                               FontSize="14">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE109;" FontSize="12"/>
                                <TextBlock Text="Add tag"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
                
                <!-- Organization Section -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- User/Collection Info -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                        <Border Background="#E74C3C"
                               CornerRadius="12"
                               Width="24"
                               Height="24">
                            <TextBlock Text="D" 
                                      FontSize="12"
                                      FontWeight="Bold"
                                      Foreground="White"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                        </Border>
                        <ComboBox Background="#404040"
                                 Foreground="White"
                                 BorderThickness="0"
                                 SelectedIndex="0">
                            <ComboBoxItem Content="David's Personal"/>
                            <ComboBoxItem Content="Work"/>
                            <ComboBoxItem Content="Family"/>
                        </ComboBox>
                    </StackPanel>
                    
                    <!-- Save Button -->
                    <Button Grid.Column="1"
                           Background="#7C3AED"
                           Foreground="White"
                           BorderThickness="0"
                           CornerRadius="8"
                           Padding="24,12"
                           Click="SaveItem_Click">
                        <TextBlock Text="Save" FontSize="16" FontWeight="SemiBold"/>
                    </Button>
                </Grid>
                
            </StackPanel>
            
        </Grid>
    </ScrollViewer>
</ContentDialog>