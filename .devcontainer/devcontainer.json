{
	"name": "Password Manager - .NET 9 with MAUI",
	"build": {
		"dockerfile": "Dockerfile",
		"context": ".."
	},
	"features": {
		"ghcr.io/devcontainers/features/git:1": {},
		"ghcr.io/devcontainers/features/github-cli:1": {},
		"ghcr.io/devcontainers/features/docker-in-docker:2": {},
		"ghcr.io/devcontainers/features/node:1": {
			"nodeGypDependencies": true,
			"version": "lts"
		}
	},
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-dotnettools.csharp",
				"ms-dotnettools.csdevkit",
				"ms-dotnettools.dotnet-maui",
				"ms-dotnettools.blazor-webassembly-debugger",
				"ms-vscode.vscode-json",
				"ms-azuretools.vscode-docker",
				"GitHub.copilot",
				"GitHub.copilot-chat",
				"bradlc.vscode-tailwindcss",
				"formulahendry.auto-rename-tag",
				"christian-kohler.path-intellisense",
				"ms-vscode.powershell",
				"redhat.vscode-yaml"
			],
			"settings": {
				"dotnet.defaultSolution": "PasswordManager.sln",
				"omnisharp.enableEditorConfigSupport": true,
				"omnisharp.enableRoslynAnalyzers": true,
				"files.exclude": {
					"**/bin": true,
					"**/obj": true
				},
				"search.exclude": {
					"**/bin": true,
					"**/obj": true
				}
			}
		}
	},
	"onCreateCommand": [
		"bash",
		".devcontainer/setup.sh"
	],
	"postCreateCommand": [
		"bash",
		"-c",
		"echo 'Starting database services...' && docker-compose -f .devcontainer/docker-compose.yml up -d && echo 'Database services started!'"
	],
	"postStartCommand": [
		"bash",
		"-c",
		"echo 'Development container started successfully!' && echo 'Available commands:' && echo '  - dotnet build (build solution)' && echo '  - dotnet run --project PasswordManager.API (run API)' && echo '  - dotnet run --project PasswordManager.Web (run Web)' && echo '  - ./docker-run.sh build-all (build Docker containers)'"
	],
	"forwardPorts": [
		5000,
		5001,
		5002,
		5003,
		5432,
		3306,
		1433
	],
	"portsAttributes": {
		"5000": {
			"label": "Password Manager API (HTTP)",
			"onAutoForward": "notify"
		},
		"5001": {
			"label": "Password Manager API (HTTPS)",
			"onAutoForward": "notify"
		},
		"5002": {
			"label": "Password Manager Web (HTTP)",
			"onAutoForward": "notify"
		},
		"5003": {
			"label": "Password Manager Web (HTTPS)",
			"onAutoForward": "notify"
		},
		"5432": {
			"label": "PostgreSQL Database",
			"onAutoForward": "silent"
		},
		"3306": {
			"label": "MySQL Database",
			"onAutoForward": "silent"
		},
		"1433": {
			"label": "SQL Server Database",
			"onAutoForward": "silent"
		}
	},
	"mounts": [
		"source=passwordmanager-nuget,target=/home/vscode/.nuget,type=volume"
	],
	"remoteEnv": {
		"DOTNET_USE_POLLING_FILE_WATCHER": "true",
		"DOTNET_RUNNING_IN_CONTAINER": "true",
		"ASPNETCORE_ENVIRONMENT": "Development",
		"EXCLUDE_IOS_MACOS": "true"
	},
	"remoteUser": "vscode"
}